from bs4 import BeautifulSoup
from requests import get
import pandas as pd 
import plotly.graph_objects as go


 


# website urls
url = "https://www.imdb.com/search/title/?locations=Regina,%20Saskatchewan&view=advanced"
response = get(url)

 


html_soup = BeautifulSoup(response.text, 'html.parser')

 

stuff = html_soup.find_all('div', class_ = 'lister-item mode-advanced')

 

print(type(stuff))
print(len(stuff))

 
d = pd.DataFrame()
for item in stuff:
    name = item.h3.a.text
    rating_check = item.find('strong')
    if rating_check is None:
        rating = "N/A"
    else:
        rating = item.strong.text

 

    vote_check = item.find('span', attrs = {'name':'nv'})
    if vote_check is None:
        votes = "N/A"
    else:
        votes = item.find('span', attrs = {'name':'nv'})['data-value']
    d.append({'name': name, 'rating': rating, 'votes': votes()})
pd.DataFrame(d)

fig = go.Figure(data=[go.Bar(x=Name, y=rating,
            hovertext=[votes]])])
fig.update_traces(marker_color='rgb(158,202,225)', marker_line_color='rgb(8,48,107)',
                  marker_line_width=1.5, opacity=0.6)
fig.update_layout(title_text='Regina Movies Rating')
fig.show()        
        
    print (name, '    ', rating, '    ', votes)
